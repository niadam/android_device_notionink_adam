diff --git a/packages/apps/Settings/res/values/config.xml b/packages/apps/Settings/res/values/config.xml
index a08079f..0acac37 100755
--- a/packages/apps/Settings/res/values/config.xml
+++ b/packages/apps/Settings/res/values/config.xml
@@ -39,4 +39,7 @@
          very long strings too. -->
     <integer name="maximum_user_dictionary_word_length" translatable="false">48</integer>
 
+    <!-- Ad-hoc network support. Some devices (unpatched bcmdhd) have broken
+         ad-hoc support and so we should hide ad-hoc network on those devices -->
+    <bool name="config_show_adhoc_network">true</bool>
 </resources>
diff --git a/packages/apps/Settings/res/values/strings.xml b/packages/apps/Settings/res/values/strings.xml
index 1202ebd..d633de3 100644
--- a/packages/apps/Settings/res/values/strings.xml
+++ b/packages/apps/Settings/res/values/strings.xml
@@ -1333,6 +1333,13 @@
     <!-- Substring of wifi status for wifi with authentication.  This version is for when the
          string is not first in the list (lowercase in english) -->
     <string name="wifi_secured_second_item">, secured with <xliff:g id="wifi_security_short">%1$s</xliff:g></string>
+    
+    <!-- Substring of status line when the network is a ad-hoc network and
+         string is listed first -->
+    <string name="wifi_adhoc_first_item">Ad-hoc network</string>
+    <!-- Substring of wifi status when the network is a ad-hoc network and
+         string is listed after a wifi_secured_* string-->
+    <string name="wifi_adhoc_second_item">\u0020(ad-hoc network)</string>
 
     <!-- Do not translate.  Concise terminology for wifi with WEP security -->
     <string name="wifi_security_short_wep">WEP</string>
diff --git a/packages/apps/Settings/src/com/android/settings/wifi/AccessPoint.java b/packages/apps/Settings/src/com/android/settings/wifi/AccessPoint.java
index 5a7a768..5f05d0c 100644
--- a/packages/apps/Settings/src/com/android/settings/wifi/AccessPoint.java
+++ b/packages/apps/Settings/src/com/android/settings/wifi/AccessPoint.java
@@ -61,6 +61,7 @@ class AccessPoint extends Preference {
     String bssid;
     int security;
     int networkId;
+    int mode;
     boolean wpsAvailable = false;
 
     PskType pskType = PskType.UNKNOWN;
@@ -187,6 +188,7 @@ class AccessPoint extends Preference {
         bssid = config.BSSID;
         security = getSecurity(config);
         networkId = config.networkId;
+        mode = config.mode;
         mRssi = Integer.MAX_VALUE;
         mConfig = config;
     }
@@ -199,6 +201,8 @@ class AccessPoint extends Preference {
         if (security == SECURITY_PSK)
             pskType = getPskType(result);
         networkId = -1;
+        mode = result.capabilities.contains("[IBSS]") ?
+            WifiConfiguration.Mode.ADHOC : WifiConfiguration.Mode.INFRASTRUCTURE;
         mRssi = result.level;
         mScanResult = result;
     }
@@ -359,6 +363,14 @@ class AccessPoint extends Preference {
                     summary.append(context.getString(R.string.wifi_wps_available_second_item));
                 }
             }
+
+            if (mode == WifiConfiguration.Mode.ADHOC) {
+                if (summary.length() == 0) {
+                    summary.append(context.getString(R.string.wifi_adhoc_first_item));
+                } else {
+                    summary.append(context.getString(R.string.wifi_adhoc_second_item));
+                }
+            }
             setSummary(summary.toString());
         }
     }
@@ -376,5 +388,6 @@ class AccessPoint extends Preference {
         mConfig = new WifiConfiguration();
         mConfig.SSID = AccessPoint.convertToQuotedString(ssid);
         mConfig.allowedKeyManagement.set(KeyMgmt.NONE);
+        mConfig.mode = mode;
     }
 }
diff --git a/packages/apps/Settings/src/com/android/settings/wifi/WifiConfigController.java b/packages/apps/Settings/src/com/android/settings/wifi/WifiConfigController.java
index 2598a0e..e27f048 100644
--- a/packages/apps/Settings/src/com/android/settings/wifi/WifiConfigController.java
+++ b/packages/apps/Settings/src/com/android/settings/wifi/WifiConfigController.java
@@ -318,6 +318,7 @@ public class WifiConfigController implements TextWatcher,
         } else {
             config.networkId = mAccessPoint.networkId;
         }
+        config.mode = mAccessPoint.mode;
 
         switch (mAccessPointSecurity) {
             case AccessPoint.SECURITY_NONE:
diff --git a/packages/apps/Settings/src/com/android/settings/wifi/WifiSettings.java b/packages/apps/Settings/src/com/android/settings/wifi/WifiSettings.java
index de42f2a..50aee2b 100644
--- a/packages/apps/Settings/src/com/android/settings/wifi/WifiSettings.java
+++ b/packages/apps/Settings/src/com/android/settings/wifi/WifiSettings.java
@@ -136,6 +136,8 @@ public class WifiSettings extends SettingsPreferenceFragment
 
     private TextView mEmptyView;
 
+    private boolean mShowAdhoc;
+
     /* Used in Wifi Setup context */
 
     // this boolean extra specifies whether to disable the Next button when not connected
@@ -359,6 +361,8 @@ public class WifiSettings extends SettingsPreferenceFragment
         }
         setHasOptionsMenu(true);
 
+        mShowAdhoc = getResources().getBoolean(R.bool.config_show_adhoc_network);
+
         // After confirming PreferenceScreen is available, we call super.
         super.onActivityCreated(savedInstanceState);
     }
@@ -672,9 +676,13 @@ public class WifiSettings extends SettingsPreferenceFragment
         final List<ScanResult> results = mWifiManager.getScanResults();
         if (results != null) {
             for (ScanResult result : results) {
-                // Ignore hidden and ad-hoc networks.
-                if (result.SSID == null || result.SSID.length() == 0 ||
-                        result.capabilities.contains("[IBSS]")) {
+                // Ignore hidden networks.
+                if (result.SSID == null || result.SSID.length() == 0) {
+                    continue;
+                }
+
+                // Ignore ad-hoc network on unsupported devices
+                if (result.capabilities.contains("[IBSS]") && !mShowAdhoc) {
                     continue;
                 }
 
